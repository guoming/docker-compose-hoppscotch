version: '3.5'
networks:
  microservice:
    external:
      name: microservice

services:
  redis:
    restart: always
    image: redis:latest
    deploy:
     replicas: 1
     restart_policy:
      condition: on-failure
    ports:
     - "6379:6379"
    networks:
      - microservice
    environment:     
     - SERVICE_NAME=elasticsearch
     - SERVICE_TAGS=db,elasticsearch
     - SERVICE_REGION=DC1
     - SERVICE_CHECK_INITIAL_STATUS=passing
     - SERVICE_80_CHECK_HTTP=/healthcheck
     - SERVICE_80_CHECK_INTERVAL=15s
     - SERVICE_80_CHECK_TIMEOUT=15s